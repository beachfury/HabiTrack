@import 'tailwindcss';

/* Configure Tailwind v4 to use class-based dark mode (instead of media query) */
@custom-variant dark (&:where(.dark, .dark *));

/* ============================================
   THEME SYSTEM CSS VARIABLES
   ============================================ */
:root {
  /* Legacy accent color (backward compatible) */
  --accent-color: #3cb371;
  --accent-color-rgb: 60, 179, 113;

  /* Layout */
  --layout-type: sidebar-left;
  --sidebar-width: 256px;
  --header-height: 64px;
  --nav-style: icons-text;

  /* Colors - Light Mode Defaults (HabiTrack Brand) */
  --color-primary: #3cb371;
  --color-primary-foreground: #ffffff;
  --color-secondary: #f3f4f6;
  --color-secondary-foreground: #3d4f5f;
  --color-accent: #3cb371;
  --color-accent-foreground: #ffffff;
  --color-background: #ffffff;
  --color-foreground: #3d4f5f;
  --color-card: #ffffff;
  --color-card-foreground: #3d4f5f;
  --color-muted: #f3f4f6;
  --color-muted-foreground: #6b7280;
  --color-border: #e5e7eb;
  --color-destructive: #ef4444;
  --color-destructive-foreground: #ffffff;
  --color-success: #22c55e;
  --color-success-foreground: #ffffff;
  --color-warning: #f59e0b;
  --color-warning-foreground: #1f2937;

  /* Typography */
  --font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-family-heading: var(--font-family);
  --font-size-base: 16px;
  --line-height: 1.5;

  /* UI */
  --radius-base: 0.5rem;
  --radius-sm: calc(var(--radius-base) * 0.5);
  --radius-md: var(--radius-base);
  --radius-lg: calc(var(--radius-base) * 1.5);
  --radius-xl: calc(var(--radius-base) * 2);
  --shadow-base: 0 1px 2px rgba(0, 0, 0, 0.05);

  /* Sidebar */
  --sidebar-bg: var(--color-card);
  --sidebar-text: var(--color-foreground);
  --sidebar-image: none;
  --sidebar-image-opacity: 30;
  --sidebar-blur: 0px;

  /* Page Background (global) */
  --page-bg: var(--color-background);
  --page-bg-image: none;
  --page-bg-pattern: none;
  --page-bg-opacity: 1;

  /* Page-specific backgrounds (default to global) */
  --home-page-bg: var(--page-bg);
  --home-page-bg-image: var(--page-bg-image);
  --home-page-bg-opacity: var(--page-bg-opacity);

  --calendar-page-bg: var(--page-bg);
  --calendar-page-bg-image: var(--page-bg-image);
  --calendar-page-bg-opacity: var(--page-bg-opacity);

  --chores-page-bg: var(--page-bg);
  --chores-page-bg-image: var(--page-bg-image);
  --chores-page-bg-opacity: var(--page-bg-opacity);

  --shopping-page-bg: var(--page-bg);
  --shopping-page-bg-image: var(--page-bg-image);
  --shopping-page-bg-opacity: var(--page-bg-opacity);

  --messages-page-bg: var(--page-bg);
  --messages-page-bg-image: var(--page-bg-image);
  --messages-page-bg-opacity: var(--page-bg-opacity);

  --settings-page-bg: var(--page-bg);
  --settings-page-bg-image: var(--page-bg-image);
  --settings-page-bg-opacity: var(--page-bg-opacity);

  --budget-page-bg: var(--page-bg);
  --budget-page-bg-image: var(--page-bg-image);
  --budget-page-bg-opacity: var(--page-bg-opacity);

  --meals-page-bg: var(--page-bg);
  --meals-page-bg-image: var(--page-bg-image);
  --meals-page-bg-opacity: var(--page-bg-opacity);

  --recipes-page-bg: var(--page-bg);
  --recipes-page-bg-image: var(--page-bg-image);
  --recipes-page-bg-opacity: var(--page-bg-opacity);

  --paidchores-page-bg: var(--page-bg);
  --paidchores-page-bg-image: var(--page-bg-image);
  --paidchores-page-bg-opacity: var(--page-bg-opacity);

  --family-page-bg: var(--page-bg);
  --family-page-bg-image: var(--page-bg-image);
  --family-page-bg-opacity: var(--page-bg-opacity);

  --store-page-bg: var(--page-bg);
  --store-page-bg-image: var(--page-bg-image);
  --store-page-bg-opacity: var(--page-bg-opacity);

  /* ============================================
     ELEMENT-SPECIFIC CSS VARIABLES
     Per-element customization for advanced theming
     ============================================ */

  /* Card Element */
  --card-bg: var(--color-card);
  --card-text: var(--color-card-foreground);
  --card-border: var(--color-border);
  --card-border-width: 1px;
  --card-radius: var(--radius-lg);
  --card-shadow: var(--shadow-base);
  --card-padding: 16px;
  --card-custom-css: ;

  /* Widget Element (inside cards) */
  --widget-bg: var(--color-muted);
  --widget-text: var(--color-foreground);
  --widget-border: transparent;
  --widget-border-width: 0px;
  --widget-radius: var(--radius-md);
  --widget-shadow: none;
  --widget-padding: 12px;
  --widget-custom-css: ;

  /* Header Element */
  --header-bg: var(--color-card);
  --header-text: var(--color-foreground);
  --header-border: var(--color-border);
  --header-height: 64px;
  --header-custom-css: ;

  /* Primary Button */
  --btn-primary-bg: var(--color-primary);
  --btn-primary-text: var(--color-primary-foreground);
  --btn-primary-border: transparent;
  --btn-primary-radius: var(--radius-md);
  --btn-primary-padding: 8px 16px;
  --btn-primary-shadow: none;
  --btn-primary-custom-css: ;

  /* Secondary Button */
  --btn-secondary-bg: var(--color-secondary);
  --btn-secondary-text: var(--color-secondary-foreground);
  --btn-secondary-border: var(--color-border);
  --btn-secondary-radius: var(--radius-md);
  --btn-secondary-padding: 8px 16px;
  --btn-secondary-shadow: none;
  --btn-secondary-custom-css: ;

  /* Modal Element */
  --modal-bg: var(--color-card);
  --modal-text: var(--color-card-foreground);
  --modal-border: var(--color-border);
  --modal-radius: var(--radius-xl);
  --modal-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  --modal-backdrop: rgba(0, 0, 0, 0.5);
  --modal-custom-css: ;

  /* Input Element */
  --input-bg: var(--color-background);
  --input-text: var(--color-foreground);
  --input-border: var(--color-border);
  --input-border-width: 1px;
  --input-radius: var(--radius-md);
  --input-padding: 8px 12px;
  --input-focus-ring: var(--color-primary);
  --input-custom-css: ;

  /* Login Page Element (for login page styling) */
  --login-bg: linear-gradient(135deg, #f8faf9 0%, #e8f5e9 50%, #c8e6c9 100%);
  --login-card-bg: #ffffff;
  --login-card-border: #e5e7eb;
  --login-card-radius: var(--radius-xl);
  --login-text: #3d4f5f;
  --login-brand-color: var(--color-primary);
  --login-custom-css: ;

  /* LCARS Mode Variables */
  --lcars-enabled: 0;
  --lcars-corner-style: rounded;
  --lcars-primary: #cc9900;
  --lcars-secondary: #9999ff;
  --lcars-tertiary: #cc6666;
  --lcars-background: #000000;

  /* Kiosk Mode Variables */
  --kiosk-bg-gradient-from: #8b5cf6;
  --kiosk-bg-gradient-to: #3b82f6;
  --kiosk-text: #ffffff;
  --kiosk-text-muted: rgba(255, 255, 255, 0.8);
  --kiosk-button-bg: rgba(255, 255, 255, 0.2);
  --kiosk-button-hover: rgba(255, 255, 255, 0.3);
  --kiosk-button-active: rgba(255, 255, 255, 0.4);
  --kiosk-accent: #ffffff;
  --kiosk-error-bg: rgba(239, 68, 68, 0.8);
  --kiosk-error-text: #ffffff;
}

/* Dark Mode Defaults (HabiTrack Brand) */
.dark {
  --color-primary: #4fd693;
  --color-primary-foreground: #1a2e26;
  --color-secondary: #374151;
  --color-secondary-foreground: #f9fafb;
  --color-accent: #4fd693;
  --color-accent-foreground: #1a2e26;
  --color-background: #1a2530;
  --color-foreground: #f9fafb;
  --color-card: #243340;
  --color-card-foreground: #f9fafb;
  --color-muted: #2d3e4e;
  --color-muted-foreground: #9ca3af;
  --color-border: #3d4f5f;
  --color-destructive: #f87171;
  --color-destructive-foreground: #1f2937;
  --color-success: #4ade80;
  --color-success-foreground: #1f2937;
  --color-warning: #fbbf24;
  --color-warning-foreground: #1f2937;

  --sidebar-bg: var(--color-card);
  --sidebar-text: var(--color-foreground);
  --page-bg: var(--color-background);

  /* Element-specific dark mode overrides */
  --card-bg: var(--color-card);
  --card-text: var(--color-card-foreground);
  --card-border: var(--color-border);
  --widget-bg: var(--color-muted);
  --widget-text: var(--color-foreground);
  --header-bg: var(--color-card);
  --header-text: var(--color-foreground);
  --input-bg: var(--color-muted);
  --input-text: var(--color-foreground);
  --input-border: var(--color-border);
  --modal-bg: var(--color-card);
  --modal-text: var(--color-card-foreground);
  --modal-backdrop: rgba(0, 0, 0, 0.7);

  /* Login Page Dark Mode */
  --login-bg: linear-gradient(135deg, #111827 0%, #1a2e1a 50%, #1f2937 100%);
  --login-card-bg: #1f2937;
  --login-card-border: #374151;
  --login-text: #f9fafb;
  --login-brand-color: #4fd693;
}

/* Starry background effect - fades out toward bottom */
.bg-stars {
  background-image:
    /* Dense stars at top */
    radial-gradient(2px 2px at 20px 30px, white, transparent),
    radial-gradient(1px 1px at 40px 70px, rgba(255, 255, 255, 0.9), transparent),
    radial-gradient(2px 2px at 90px 20px, white, transparent),
    radial-gradient(1px 1px at 160px 50px, rgba(255, 255, 255, 0.8), transparent),
    radial-gradient(2px 2px at 230px 15px, white, transparent),
    radial-gradient(1px 1px at 300px 60px, rgba(255, 255, 255, 0.9), transparent),
    radial-gradient(2px 2px at 370px 35px, white, transparent),
    radial-gradient(1px 1px at 450px 80px, rgba(255, 255, 255, 0.7), transparent),
    radial-gradient(2px 2px at 520px 25px, white, transparent),
    radial-gradient(1px 1px at 600px 55px, rgba(255, 255, 255, 0.8), transparent),
    radial-gradient(2px 2px at 680px 40px, white, transparent),
    radial-gradient(1px 1px at 750px 70px, rgba(255, 255, 255, 0.9), transparent),
    radial-gradient(2px 2px at 50px 100px, rgba(255, 255, 255, 0.9), transparent),
    radial-gradient(1px 1px at 120px 130px, rgba(255, 255, 255, 0.8), transparent),
    radial-gradient(2px 2px at 200px 110px, rgba(255, 255, 255, 0.85), transparent),
    radial-gradient(1px 1px at 280px 145px, rgba(255, 255, 255, 0.7), transparent),
    radial-gradient(2px 2px at 350px 120px, rgba(255, 255, 255, 0.8), transparent),
    radial-gradient(1px 1px at 420px 150px, rgba(255, 255, 255, 0.75), transparent),
    radial-gradient(2px 2px at 500px 105px, rgba(255, 255, 255, 0.9), transparent),
    radial-gradient(1px 1px at 580px 140px, rgba(255, 255, 255, 0.7), transparent),
    radial-gradient(2px 2px at 660px 125px, rgba(255, 255, 255, 0.8), transparent),
    radial-gradient(1px 1px at 730px 160px, rgba(255, 255, 255, 0.6), transparent),
    /* Medium density - middle area */
      radial-gradient(1px 1px at 80px 200px, rgba(255, 255, 255, 0.6), transparent),
    radial-gradient(2px 2px at 180px 220px, rgba(255, 255, 255, 0.5), transparent),
    radial-gradient(1px 1px at 270px 190px, rgba(255, 255, 255, 0.55), transparent),
    radial-gradient(1px 1px at 380px 230px, rgba(255, 255, 255, 0.45), transparent),
    radial-gradient(2px 2px at 480px 210px, rgba(255, 255, 255, 0.5), transparent),
    radial-gradient(1px 1px at 560px 240px, rgba(255, 255, 255, 0.4), transparent),
    radial-gradient(1px 1px at 650px 200px, rgba(255, 255, 255, 0.5), transparent),
    radial-gradient(2px 2px at 720px 250px, rgba(255, 255, 255, 0.35), transparent),
    /* Sparse/faint stars - lower area */
      radial-gradient(1px 1px at 100px 300px, rgba(255, 255, 255, 0.3), transparent),
    radial-gradient(1px 1px at 250px 320px, rgba(255, 255, 255, 0.2), transparent),
    radial-gradient(1px 1px at 400px 290px, rgba(255, 255, 255, 0.25), transparent),
    radial-gradient(1px 1px at 550px 330px, rgba(255, 255, 255, 0.15), transparent),
    radial-gradient(1px 1px at 700px 310px, rgba(255, 255, 255, 0.2), transparent);
  background-size: 800px 400px;
  background-repeat: repeat-x;
  background-position: top;
  mask-image: linear-gradient(to bottom, black 0%, black 20%, transparent 50%);
  -webkit-mask-image: linear-gradient(to bottom, black 0%, black 20%, transparent 50%);
}

/* Dark mode styles */
.dark {
  color-scheme: dark;
}

.dark body {
  background-color: #111827;
  color: #f9fafb;
}

.dark .bg-white {
  background-color: #1f2937 !important;
}

.dark .bg-gray-50 {
  background-color: #111827 !important;
}

.dark .bg-gray-100 {
  background-color: #1f2937 !important;
}

.dark .border-gray-100,
.dark .border-gray-200 {
  border-color: #374151 !important;
}

.dark .text-gray-900 {
  color: #f9fafb !important;
}

.dark .text-gray-700 {
  color: #d1d5db !important;
}

.dark .text-gray-600 {
  color: #9ca3af !important;
}

.dark .text-gray-500 {
  color: #9ca3af !important;
}

.dark .text-gray-400 {
  color: #6b7280 !important;
}

.dark .hover\:bg-gray-100:hover {
  background-color: #374151 !important;
}

.dark .hover\:bg-gray-50:hover {
  background-color: #1f2937 !important;
}

.dark input,
.dark textarea,
.dark select {
  background-color: #374151 !important;
  border-color: #4b5563 !important;
  color: #f9fafb !important;
}

.dark input::placeholder,
.dark textarea::placeholder {
  color: #9ca3af !important;
}

.dark .shadow-sm {
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.3) !important;
}

.dark .shadow-xl {
  box-shadow:
    0 20px 25px -5px rgb(0 0 0 / 0.4),
    0 8px 10px -6px rgb(0 0 0 / 0.4) !important;
}

/* Accent color utilities */
.bg-accent {
  background-color: var(--accent-color);
}

.text-accent {
  color: var(--accent-color);
}

.border-accent {
  border-color: var(--accent-color);
}

.ring-accent {
  --tw-ring-color: var(--accent-color);
}

.bg-accent-light {
  background-color: rgba(var(--accent-color-rgb), 0.1);
}

/* ============================================
   MODAL OVERLAY FIX
   Forces modals to be properly centered regardless
   of parent element positioning/overflow issues
   ============================================ */
.modal-overlay {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  z-index: 9999 !important;
  padding: 1rem;
}

.text-accent-dark {
  color: var(--accent-color);
  filter: brightness(0.8);
}

/* ============================================
   THEME UTILITY CLASSES
   ============================================ */

/* Primary color utilities */
.bg-primary {
  background-color: var(--color-primary);
}

.text-primary {
  color: var(--color-primary);
}

.border-primary {
  border-color: var(--color-primary);
}

/* Card utilities */
.bg-card {
  background-color: var(--color-card);
}

.text-card-foreground {
  color: var(--color-card-foreground);
}

/* Muted utilities */
.bg-muted {
  background-color: var(--color-muted);
}

.text-muted-foreground {
  color: var(--color-muted-foreground);
}

/* Border utilities */
.border-theme {
  border-color: var(--color-border);
}

/* Destructive utilities */
.bg-destructive {
  background-color: var(--color-destructive);
}

.text-destructive {
  color: var(--color-destructive);
}

/* Success utilities */
.bg-success {
  background-color: var(--color-success);
}

.text-success {
  color: var(--color-success);
}

/* Warning utilities */
.bg-warning {
  background-color: var(--color-warning);
}

.text-warning {
  color: var(--color-warning);
}

/* Border radius utilities */
.rounded-theme {
  border-radius: var(--radius-base);
}

.rounded-theme-sm {
  border-radius: var(--radius-sm);
}

.rounded-theme-lg {
  border-radius: var(--radius-lg);
}

.rounded-theme-xl {
  border-radius: var(--radius-xl);
}

/* Shadow utilities */
.shadow-theme {
  box-shadow: var(--shadow-base);
}

/* Font utilities */
.font-theme {
  font-family: var(--font-family);
}

.font-theme-heading {
  font-family: var(--font-family-heading);
}

/* ============================================
   ELEMENT-SPECIFIC UTILITY CLASSES
   For per-element customization
   ============================================ */

/* Themed Card */
.themed-card {
  /* Use 'background' to support gradients */
  background: var(--card-bg);
  color: var(--card-text);
  border: var(--card-border-width) solid var(--card-border);
  border-radius: var(--card-radius);
  box-shadow: var(--card-shadow);
  padding: var(--card-padding);
  position: relative;
  overflow: hidden;
}

/* Background image layer for card */
.themed-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--card-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--card-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

/* Ensure content is above the background image */
.themed-card > * {
  position: relative;
  z-index: 1;
}

/* Themed Widget */
.themed-widget {
  /* Use 'background' to support gradients */
  background: var(--widget-bg);
  color: var(--widget-text);
  border: var(--widget-border-width) solid var(--widget-border);
  border-radius: var(--widget-radius);
  box-shadow: var(--widget-shadow);
  padding: var(--widget-padding);
  position: relative;
  overflow: hidden;
}

/* Background image layer for widget */
.themed-widget::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--widget-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--widget-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

/* Ensure content is above the background image */
.themed-widget > * {
  position: relative;
  z-index: 1;
}

/* Themed Header */
.themed-header {
  /* Use 'background' to support gradients */
  background: var(--header-bg);
  color: var(--header-text);
  border-bottom: 1px solid var(--header-border);
  height: var(--header-height);
}

/* Themed Primary Button */
.themed-btn-primary {
  /* Use 'background' to support gradients */
  background: var(--btn-primary-bg);
  color: var(--btn-primary-text);
  border: 1px solid var(--btn-primary-border);
  border-radius: var(--btn-primary-radius);
  padding: var(--btn-primary-padding);
  box-shadow: var(--btn-primary-shadow, none), 0 0 var(--btn-primary-glow-size, 0px) var(--btn-primary-glow-color, transparent);
  font-weight: 500;
  /* Effects */
  opacity: var(--btn-primary-opacity, 1);
  backdrop-filter: blur(var(--btn-primary-blur, 0px));
  filter: saturate(var(--btn-primary-saturation, 100%)) grayscale(var(--btn-primary-grayscale, 0%));
  transform: scale(var(--btn-primary-scale, 1)) rotate(var(--btn-primary-rotate, 0deg)) skewX(var(--btn-primary-skew-x, 0deg)) skewY(var(--btn-primary-skew-y, 0deg));
  transition: all 0.15s ease;
}

.themed-btn-primary:hover {
  filter: brightness(1.1) saturate(var(--btn-primary-saturation, 100%)) grayscale(var(--btn-primary-grayscale, 0%));
  transform: scale(var(--btn-primary-hover-scale, var(--btn-primary-scale, 1))) rotate(var(--btn-primary-rotate, 0deg)) skewX(var(--btn-primary-skew-x, 0deg)) skewY(var(--btn-primary-skew-y, 0deg));
  opacity: var(--btn-primary-hover-opacity, var(--btn-primary-opacity, 1));
}

.themed-btn-primary:active {
  filter: brightness(0.95) saturate(var(--btn-primary-saturation, 100%)) grayscale(var(--btn-primary-grayscale, 0%));
}

/* Themed Secondary Button */
.themed-btn-secondary {
  /* Use 'background' to support gradients */
  background: var(--btn-secondary-bg);
  color: var(--btn-secondary-text);
  border: 1px solid var(--btn-secondary-border);
  border-radius: var(--btn-secondary-radius);
  padding: var(--btn-secondary-padding);
  box-shadow: var(--btn-secondary-shadow, none), 0 0 var(--btn-secondary-glow-size, 0px) var(--btn-secondary-glow-color, transparent);
  font-weight: 500;
  /* Effects */
  opacity: var(--btn-secondary-opacity, 1);
  backdrop-filter: blur(var(--btn-secondary-blur, 0px));
  filter: saturate(var(--btn-secondary-saturation, 100%)) grayscale(var(--btn-secondary-grayscale, 0%));
  transform: scale(var(--btn-secondary-scale, 1)) rotate(var(--btn-secondary-rotate, 0deg)) skewX(var(--btn-secondary-skew-x, 0deg)) skewY(var(--btn-secondary-skew-y, 0deg));
  transition: all 0.15s ease;
}

.themed-btn-secondary:hover {
  filter: brightness(0.95) saturate(var(--btn-secondary-saturation, 100%)) grayscale(var(--btn-secondary-grayscale, 0%));
  transform: scale(var(--btn-secondary-hover-scale, var(--btn-secondary-scale, 1))) rotate(var(--btn-secondary-rotate, 0deg)) skewX(var(--btn-secondary-skew-x, 0deg)) skewY(var(--btn-secondary-skew-y, 0deg));
  opacity: var(--btn-secondary-hover-opacity, var(--btn-secondary-opacity, 1));
}

/* Themed Modal */
.themed-modal {
  /* Use 'background' to support gradients */
  background: var(--modal-bg);
  color: var(--modal-text);
  border: 1px solid var(--modal-border);
  border-radius: var(--modal-radius);
  box-shadow: var(--modal-shadow);
}

.themed-modal-backdrop {
  background-color: var(--modal-backdrop);
}

/* Themed Input */
.themed-input {
  /* Use 'background' to support gradients */
  background: var(--input-bg);
  color: var(--input-text);
  border: var(--input-border-width) solid var(--input-border);
  border-radius: var(--input-radius);
  padding: var(--input-padding);
}

.themed-input:focus {
  outline: none;
  border-color: var(--input-focus-ring);
  box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
}

/* Themed Page Background (global) */
.themed-page-bg {
  background: var(--page-bg);
  position: relative;
}

.themed-page-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-page-bg > * {
  position: relative;
  z-index: 1;
}

/* Themed Sidebar */
.themed-sidebar {
  background: var(--sidebar-bg);
  color: var(--sidebar-text);
  font-family: var(--sidebar-font-family, inherit);
  font-size: var(--sidebar-font-size, inherit);
  font-weight: var(--sidebar-font-weight, inherit);
  border-width: var(--sidebar-border-width, 0);
  border-style: var(--sidebar-border-style, solid);
  border-color: var(--sidebar-border, transparent);
  border-radius: var(--sidebar-radius, 0);
  box-shadow: var(--sidebar-shadow, none), 0 0 var(--sidebar-glow-size, 0px) var(--sidebar-glow-color, transparent);
  padding: var(--sidebar-padding);
  /* Effects */
  opacity: var(--sidebar-opacity, 1);
  backdrop-filter: blur(var(--sidebar-blur, 0px));
  filter: saturate(var(--sidebar-saturation, 100%)) grayscale(var(--sidebar-grayscale, 0%));
  transform: scale(var(--sidebar-scale, 1)) rotate(var(--sidebar-rotate, 0deg)) skewX(var(--sidebar-skew-x, 0deg)) skewY(var(--sidebar-skew-y, 0deg));
  transition: transform 0.2s ease, opacity 0.2s ease;
  position: relative;
  overflow: hidden;
}

.themed-sidebar:hover {
  transform: scale(var(--sidebar-hover-scale, var(--sidebar-scale, 1))) rotate(var(--sidebar-rotate, 0deg)) skewX(var(--sidebar-skew-x, 0deg)) skewY(var(--sidebar-skew-y, 0deg));
  opacity: var(--sidebar-hover-opacity, var(--sidebar-opacity, 1));
}

/* Background image layer for sidebar */
.themed-sidebar::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--sidebar-bg-image, var(--sidebar-image));
  background-size: cover;
  background-position: center;
  opacity: var(--sidebar-bg-opacity, calc(var(--sidebar-image-opacity, 100) / 100));
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

/* Ensure content is above the background image */
.themed-sidebar > * {
  position: relative;
  z-index: 1;
}

/* ============================================
   PAGE-SPECIFIC BACKGROUND STYLES
   Allow different backgrounds per page
   ============================================ */

/* Dashboard/Home Page Background */
.themed-home-bg {
  background: var(--home-page-bg);
  position: relative;
}

.themed-home-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-home-bg > * {
  position: relative;
  z-index: 1;
}

/* Calendar Page Background */
.themed-calendar-bg {
  background: var(--calendar-page-bg);
  position: relative;
}

.themed-calendar-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--calendar-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--calendar-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-calendar-bg > * {
  position: relative;
  z-index: 1;
}

/* Chores Page Background */
.themed-chores-bg {
  background: var(--chores-page-bg);
  position: relative;
}

.themed-chores-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--chores-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--chores-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-chores-bg > * {
  position: relative;
  z-index: 1;
}

/* Shopping Page Background */
.themed-shopping-bg {
  background: var(--shopping-page-bg);
  position: relative;
}

.themed-shopping-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--shopping-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--shopping-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-shopping-bg > * {
  position: relative;
  z-index: 1;
}

/* Messages Page Background */
.themed-messages-bg {
  background: var(--messages-page-bg);
  position: relative;
}

.themed-messages-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--messages-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--messages-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-messages-bg > * {
  position: relative;
  z-index: 1;
}

/* Settings Page Background */
.themed-settings-bg {
  background: var(--settings-page-bg);
  position: relative;
}

.themed-settings-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--settings-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--settings-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-settings-bg > * {
  position: relative;
  z-index: 1;
}

/* Budget Page Background */
.themed-budget-bg {
  background: var(--budget-page-bg);
  position: relative;
}

.themed-budget-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--budget-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--budget-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-budget-bg > * {
  position: relative;
  z-index: 1;
}

/* Meals Page Background */
.themed-meals-bg {
  background: var(--meals-page-bg);
  position: relative;
}

.themed-meals-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--meals-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--meals-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-meals-bg > * {
  position: relative;
  z-index: 1;
}

/* Recipes Page Background */
.themed-recipes-bg {
  background: var(--recipes-page-bg);
  position: relative;
}

.themed-recipes-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--recipes-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--recipes-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-recipes-bg > * {
  position: relative;
  z-index: 1;
}

/* Paid Chores Page Background */
.themed-paidchores-bg {
  background: var(--paidchores-page-bg);
  position: relative;
}

.themed-paidchores-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--paidchores-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--paidchores-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-paidchores-bg > * {
  position: relative;
  z-index: 1;
}

/* Family Page Background */
.themed-family-bg {
  background: var(--family-page-bg);
  position: relative;
}

.themed-family-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--family-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--family-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-family-bg > * {
  position: relative;
  z-index: 1;
}

/* Store Page Background */
.themed-store-bg {
  background: var(--store-page-bg);
  position: relative;
}

.themed-store-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--store-page-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--store-page-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
}

.themed-store-bg > * {
  position: relative;
  z-index: 1;
}

/* ============================================
   PAGE-SPECIFIC ELEMENT STYLES
   These allow per-page customization of elements
   ============================================ */

/* Calendar Page - Title */
.themed-calendar-title {
  color: var(--calendar-title-text, var(--color-foreground));
  font-size: var(--calendar-title-font-size, 1.875rem);
  font-weight: var(--calendar-title-font-weight, 700);
  font-family: var(--calendar-title-font-family, inherit);
  /* Border support */
  border-width: var(--calendar-title-border-width, 0);
  border-style: var(--calendar-title-border-style, solid);
  border-color: var(--calendar-title-border, transparent);
  border-radius: var(--calendar-title-radius, 0);
  /* Padding for when border is used */
  padding: var(--calendar-title-padding, 0);
  /* Effects */
  opacity: var(--calendar-title-opacity, 1);
  backdrop-filter: blur(var(--calendar-title-blur, 0px));
  filter: saturate(var(--calendar-title-saturation, 100%)) grayscale(var(--calendar-title-grayscale, 0%));
  transform: scale(var(--calendar-title-scale, 1)) rotate(var(--calendar-title-rotate, 0deg)) skewX(var(--calendar-title-skew-x, 0deg)) skewY(var(--calendar-title-skew-y, 0deg));
  box-shadow: var(--calendar-title-shadow, none), 0 0 var(--calendar-title-glow-size, 0px) var(--calendar-title-glow-color, transparent);
  transition: transform 0.2s ease, opacity 0.2s ease;
}

.themed-calendar-title:hover {
  transform: scale(var(--calendar-title-hover-scale, var(--calendar-title-scale, 1))) rotate(var(--calendar-title-rotate, 0deg)) skewX(var(--calendar-title-skew-x, 0deg)) skewY(var(--calendar-title-skew-y, 0deg));
  opacity: var(--calendar-title-hover-opacity, var(--calendar-title-opacity, 1));
}

/* Calendar Page - Grid Card */
.themed-calendar-grid {
  /* Use 'background' instead of 'background-color' to support gradients */
  background: var(--calendar-grid-bg, var(--card-bg));
  color: var(--calendar-grid-text, var(--card-text));
  border: var(--calendar-grid-border-width, var(--card-border-width)) solid var(--calendar-grid-border, var(--card-border));
  border-radius: var(--calendar-grid-radius, var(--card-radius));
  box-shadow: var(--calendar-grid-shadow, var(--card-shadow));
  padding: var(--calendar-grid-padding, var(--card-padding));
  font-size: var(--calendar-grid-font-size, inherit);
  font-weight: var(--calendar-grid-font-weight, inherit);
  font-family: var(--calendar-grid-font-family, inherit);
  position: relative;
  overflow: hidden;
}

/* Background image layer for calendar grid (applied when --calendar-grid-bg-image is set) */
.themed-calendar-grid::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--calendar-grid-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--calendar-grid-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

/* Ensure content is above the background image */
.themed-calendar-grid > * {
  position: relative;
  z-index: 1;
}

/* Calendar Page - Meal Widget Card */
.themed-calendar-meal {
  /* Use 'background' instead of 'background-color' to support gradients */
  background: var(--calendar-meal-bg, var(--card-bg));
  color: var(--calendar-meal-text, var(--card-text));
  border: var(--calendar-meal-border-width, var(--card-border-width)) solid var(--calendar-meal-border, var(--card-border));
  border-radius: var(--calendar-meal-radius, var(--card-radius));
  box-shadow: var(--calendar-meal-shadow, var(--card-shadow));
  padding: var(--calendar-meal-padding, var(--card-padding));
  font-size: var(--calendar-meal-font-size, inherit);
  font-weight: var(--calendar-meal-font-weight, inherit);
  font-family: var(--calendar-meal-font-family, inherit);
  position: relative;
  overflow: hidden;
}

/* Background image layer for meal widget */
.themed-calendar-meal::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--calendar-meal-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--calendar-meal-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

/* Ensure content is above the background image */
.themed-calendar-meal > * {
  position: relative;
  z-index: 1;
}

/* Calendar Page - User Schedule Card */
.themed-calendar-user {
  /* Use 'background' instead of 'background-color' to support gradients */
  background: var(--calendar-user-bg, var(--card-bg));
  color: var(--calendar-user-text, var(--card-text));
  border: var(--calendar-user-border-width, var(--card-border-width)) solid var(--calendar-user-border, var(--card-border));
  border-radius: var(--calendar-user-radius, var(--card-radius));
  box-shadow: var(--calendar-user-shadow, var(--card-shadow));
  padding: var(--calendar-user-padding, var(--card-padding));
  font-size: var(--calendar-user-font-size, inherit);
  font-weight: var(--calendar-user-font-weight, inherit);
  font-family: var(--calendar-user-font-family, inherit);
  position: relative;
  overflow: hidden;
}

/* Background image layer for user schedule card */
.themed-calendar-user::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--calendar-user-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--calendar-user-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

/* Ensure content is above the background image */
.themed-calendar-user > * {
  position: relative;
  z-index: 1;
}

/* ============================================
   HOME PAGE ELEMENTS
   ============================================ */

/* Home - Page Title */
.themed-home-title {
  color: var(--home-title-text, var(--color-foreground));
  font-size: var(--home-title-font-size, 1.5rem);
  font-weight: var(--home-title-font-weight, 700);
  font-family: var(--home-title-font-family, inherit);
  /* Border support */
  border-width: var(--home-title-border-width, 0);
  border-style: var(--home-title-border-style, solid);
  border-color: var(--home-title-border, transparent);
  border-radius: var(--home-title-radius, 0);
  /* Padding for when border is used */
  padding: var(--home-title-padding, 0);
  /* Effects */
  opacity: var(--home-title-opacity, 1);
  backdrop-filter: blur(var(--home-title-blur, 0px));
  filter: saturate(var(--home-title-saturation, 100%)) grayscale(var(--home-title-grayscale, 0%));
  transform: scale(var(--home-title-scale, 1)) rotate(var(--home-title-rotate, 0deg)) skewX(var(--home-title-skew-x, 0deg)) skewY(var(--home-title-skew-y, 0deg));
  box-shadow: var(--home-title-shadow, none), 0 0 var(--home-title-glow-size, 0px) var(--home-title-glow-color, transparent);
  transition: transform 0.2s ease, opacity 0.2s ease;
}

.themed-home-title:hover {
  transform: scale(var(--home-title-hover-scale, var(--home-title-scale, 1))) rotate(var(--home-title-rotate, 0deg)) skewX(var(--home-title-skew-x, 0deg)) skewY(var(--home-title-skew-y, 0deg));
  opacity: var(--home-title-hover-opacity, var(--home-title-opacity, 1));
}

/* Home - Welcome Banner */
.themed-home-welcome {
  background: var(--home-welcome-bg, var(--card-bg));
  color: var(--home-welcome-text, var(--card-text));
  font-size: var(--home-welcome-font-size, inherit);
  font-weight: var(--home-welcome-font-weight, inherit);
  font-family: var(--home-welcome-font-family, inherit);
  border: var(--home-welcome-border-width, 1px) solid var(--home-welcome-border, var(--card-border));
  border-radius: var(--home-welcome-radius, var(--card-radius));
  box-shadow: var(--home-welcome-shadow, var(--card-shadow));
  padding: var(--home-welcome-padding, 16px);
  position: relative;
  overflow: hidden;
}

.themed-home-welcome::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-welcome-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-welcome-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-home-welcome > * {
  position: relative;
  z-index: 1;
}

/* Home - Stats Widget */
.themed-home-stats {
  background: var(--home-stats-bg, var(--widget-bg));
  color: var(--home-stats-text, var(--widget-text));
  font-size: var(--home-stats-font-size, inherit);
  font-weight: var(--home-stats-font-weight, inherit);
  font-family: var(--home-stats-font-family, inherit);
  border: var(--home-stats-border-width, var(--widget-border-width)) solid var(--home-stats-border, var(--widget-border));
  border-radius: var(--home-stats-radius, var(--widget-radius));
  box-shadow: var(--home-stats-shadow, var(--widget-shadow));
  padding: var(--home-stats-padding, var(--widget-padding));
  position: relative;
  overflow: hidden;
}

.themed-home-stats::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-stats-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-stats-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-home-stats > * {
  position: relative;
  z-index: 1;
}

/* Home - Chores Card */
.themed-home-chores {
  background: var(--home-chores-bg, var(--card-bg));
  color: var(--home-chores-text, var(--card-text));
  font-size: var(--home-chores-font-size, inherit);
  font-weight: var(--home-chores-font-weight, inherit);
  font-family: var(--home-chores-font-family, inherit);
  border: var(--home-chores-border-width, var(--card-border-width)) solid var(--home-chores-border, var(--card-border));
  border-radius: var(--home-chores-radius, var(--card-radius));
  box-shadow: var(--home-chores-shadow, var(--card-shadow));
  padding: var(--home-chores-padding, var(--card-padding));
  position: relative;
  overflow: hidden;
}

.themed-home-chores::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-chores-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-chores-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-home-chores > * {
  position: relative;
  z-index: 1;
}

/* Home - Events Card */
.themed-home-events {
  background: var(--home-events-bg, var(--card-bg));
  color: var(--home-events-text, var(--card-text));
  font-size: var(--home-events-font-size, inherit);
  font-weight: var(--home-events-font-weight, inherit);
  font-family: var(--home-events-font-family, inherit);
  border: var(--home-events-border-width, var(--card-border-width)) solid var(--home-events-border, var(--card-border));
  border-radius: var(--home-events-radius, var(--card-radius));
  box-shadow: var(--home-events-shadow, var(--card-shadow));
  padding: var(--home-events-padding, var(--card-padding));
  position: relative;
  overflow: hidden;
}

.themed-home-events::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-events-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-events-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-home-events > * {
  position: relative;
  z-index: 1;
}

/* Home - Weather Widget */
.themed-home-weather {
  background: var(--home-weather-bg, var(--widget-bg));
  color: var(--home-weather-text, var(--widget-text));
  font-size: var(--home-weather-font-size, inherit);
  font-weight: var(--home-weather-font-weight, inherit);
  font-family: var(--home-weather-font-family, inherit);
  border: var(--home-weather-border-width, var(--widget-border-width)) solid var(--home-weather-border, var(--widget-border));
  border-radius: var(--home-weather-radius, var(--widget-radius));
  box-shadow: var(--home-weather-shadow, var(--widget-shadow));
  padding: var(--home-weather-padding, var(--widget-padding));
  position: relative;
  overflow: hidden;
}

.themed-home-weather::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-weather-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-weather-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-home-weather > * {
  position: relative;
  z-index: 1;
}

/* Home - Leaderboard Widget */
.themed-home-leaderboard {
  background: var(--home-leaderboard-bg, var(--widget-bg));
  color: var(--home-leaderboard-text, var(--widget-text));
  font-size: var(--home-leaderboard-font-size, inherit);
  font-weight: var(--home-leaderboard-font-weight, inherit);
  font-family: var(--home-leaderboard-font-family, inherit);
  border: var(--home-leaderboard-border-width, var(--widget-border-width)) solid var(--home-leaderboard-border, var(--widget-border));
  border-radius: var(--home-leaderboard-radius, var(--widget-radius));
  box-shadow: var(--home-leaderboard-shadow, var(--widget-shadow));
  padding: var(--home-leaderboard-padding, var(--widget-padding));
  position: relative;
  overflow: hidden;
}

.themed-home-leaderboard::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-leaderboard-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-leaderboard-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-home-leaderboard > * {
  position: relative;
  z-index: 1;
}

/* Home - Meals Widget */
.themed-home-meals {
  background: var(--home-meals-bg, var(--widget-bg));
  color: var(--home-meals-text, var(--widget-text));
  font-size: var(--home-meals-font-size, inherit);
  font-weight: var(--home-meals-font-weight, inherit);
  font-family: var(--home-meals-font-family, inherit);
  border: var(--home-meals-border-width, var(--widget-border-width)) solid var(--home-meals-border, var(--widget-border));
  border-radius: var(--home-meals-radius, var(--widget-radius));
  box-shadow: var(--home-meals-shadow, var(--widget-shadow));
  padding: var(--home-meals-padding, var(--widget-padding));
  position: relative;
  overflow: hidden;
}

.themed-home-meals::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-meals-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-meals-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-home-meals > * {
  position: relative;
  z-index: 1;
}

/* Home - Shopping List Widget */
.themed-home-shopping {
  background: var(--home-shopping-bg, var(--widget-bg));
  color: var(--home-shopping-text, var(--widget-text));
  font-size: var(--home-shopping-font-size, inherit);
  font-weight: var(--home-shopping-font-weight, inherit);
  font-family: var(--home-shopping-font-family, inherit);
  border: var(--home-shopping-border-width, var(--widget-border-width)) solid var(--home-shopping-border, var(--widget-border));
  border-radius: var(--home-shopping-radius, var(--widget-radius));
  box-shadow: var(--home-shopping-shadow, var(--widget-shadow));
  padding: var(--home-shopping-padding, var(--widget-padding));
  position: relative;
  overflow: hidden;
}

.themed-home-shopping::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-shopping-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-shopping-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-home-shopping > * {
  position: relative;
  z-index: 1;
}

/* Home - Earnings Widget */
.themed-home-earnings {
  background: var(--home-earnings-bg, var(--widget-bg));
  color: var(--home-earnings-text, var(--widget-text));
  font-size: var(--home-earnings-font-size, inherit);
  font-weight: var(--home-earnings-font-weight, inherit);
  font-family: var(--home-earnings-font-family, inherit);
  border: var(--home-earnings-border-width, var(--widget-border-width)) solid var(--home-earnings-border, var(--widget-border));
  border-radius: var(--home-earnings-radius, var(--widget-radius));
  box-shadow: var(--home-earnings-shadow, var(--widget-shadow));
  padding: var(--home-earnings-padding, var(--widget-padding));
  position: relative;
  overflow: hidden;
}

.themed-home-earnings::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-earnings-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-earnings-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-home-earnings > * {
  position: relative;
  z-index: 1;
}

/* Home - Family Widget */
.themed-home-family {
  background: var(--home-family-bg, var(--widget-bg));
  color: var(--home-family-text, var(--widget-text));
  font-size: var(--home-family-font-size, inherit);
  font-weight: var(--home-family-font-weight, inherit);
  font-family: var(--home-family-font-family, inherit);
  border: var(--home-family-border-width, var(--widget-border-width)) solid var(--home-family-border, var(--widget-border));
  border-radius: var(--home-family-radius, var(--widget-radius));
  box-shadow: var(--home-family-shadow, var(--widget-shadow));
  padding: var(--home-family-padding, var(--widget-padding));
  position: relative;
  overflow: hidden;
}

.themed-home-family::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-family-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-family-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-home-family > * {
  position: relative;
  z-index: 1;
}

/* Home - Announcements Widget */
.themed-home-announcements {
  background: var(--home-announcements-bg, var(--widget-bg));
  color: var(--home-announcements-text, var(--widget-text));
  font-size: var(--home-announcements-font-size, inherit);
  font-weight: var(--home-announcements-font-weight, inherit);
  font-family: var(--home-announcements-font-family, inherit);
  border: var(--home-announcements-border-width, var(--widget-border-width)) solid var(--home-announcements-border, var(--widget-border));
  border-radius: var(--home-announcements-radius, var(--widget-radius));
  box-shadow: var(--home-announcements-shadow, var(--widget-shadow));
  padding: var(--home-announcements-padding, var(--widget-padding));
  position: relative;
  overflow: hidden;
}

.themed-home-announcements::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--home-announcements-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--home-announcements-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-home-announcements > * {
  position: relative;
  z-index: 1;
}

/* ============================================
   CHORES PAGE ELEMENTS
   ============================================ */

/* Chores - Task Card */
.themed-chores-task {
  background: var(--chores-task-bg, var(--card-bg));
  color: var(--chores-task-text, var(--card-text));
  border: var(--chores-task-border-width, var(--card-border-width)) solid var(--chores-task-border, var(--card-border));
  border-radius: var(--chores-task-radius, var(--card-radius));
  box-shadow: var(--chores-task-shadow, var(--card-shadow));
  padding: var(--chores-task-padding, var(--card-padding));
  position: relative;
  overflow: hidden;
}

.themed-chores-task::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--chores-task-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--chores-task-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-chores-task > * {
  position: relative;
  z-index: 1;
}

/* Chores - Paid Chores Card */
.themed-chores-paid {
  background: var(--chores-paid-bg, var(--card-bg));
  color: var(--chores-paid-text, var(--card-text));
  border: var(--chores-paid-border-width, var(--card-border-width)) solid var(--chores-paid-border, var(--card-border));
  border-radius: var(--chores-paid-radius, var(--card-radius));
  box-shadow: var(--chores-paid-shadow, var(--card-shadow));
  padding: var(--chores-paid-padding, var(--card-padding));
  position: relative;
  overflow: hidden;
}

.themed-chores-paid::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--chores-paid-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--chores-paid-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-chores-paid > * {
  position: relative;
  z-index: 1;
}

/* ============================================
   SHOPPING PAGE ELEMENTS
   ============================================ */

/* Shopping - Filter Widget */
.themed-shopping-filter {
  background: var(--shopping-filter-bg, var(--widget-bg));
  color: var(--shopping-filter-text, var(--widget-text));
  border: var(--shopping-filter-border-width, var(--widget-border-width)) solid var(--shopping-filter-border, var(--widget-border));
  border-radius: var(--shopping-filter-radius, var(--widget-radius));
  box-shadow: var(--shopping-filter-shadow, var(--widget-shadow));
  padding: var(--shopping-filter-padding, var(--widget-padding));
  position: relative;
  overflow: hidden;
}

.themed-shopping-filter::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--shopping-filter-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--shopping-filter-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-shopping-filter > * {
  position: relative;
  z-index: 1;
}

/* Shopping - List Card */
.themed-shopping-list {
  background: var(--shopping-list-bg, var(--card-bg));
  color: var(--shopping-list-text, var(--card-text));
  border: var(--shopping-list-border-width, var(--card-border-width)) solid var(--shopping-list-border, var(--card-border));
  border-radius: var(--shopping-list-radius, var(--card-radius));
  box-shadow: var(--shopping-list-shadow, var(--card-shadow));
  padding: var(--shopping-list-padding, var(--card-padding));
  position: relative;
  overflow: hidden;
}

.themed-shopping-list::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--shopping-list-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--shopping-list-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-shopping-list > * {
  position: relative;
  z-index: 1;
}

/* ============================================
   MESSAGES PAGE ELEMENTS
   ============================================ */

/* Messages - Announcements Card */
.themed-messages-announcements {
  background: var(--messages-announcements-bg, var(--card-bg));
  color: var(--messages-announcements-text, var(--card-text));
  border: var(--messages-announcements-border-width, var(--card-border-width)) solid var(--messages-announcements-border, var(--card-border));
  border-radius: var(--messages-announcements-radius, var(--card-radius));
  box-shadow: var(--messages-announcements-shadow, var(--card-shadow));
  padding: var(--messages-announcements-padding, var(--card-padding));
  position: relative;
  overflow: hidden;
}

.themed-messages-announcements::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--messages-announcements-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--messages-announcements-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-messages-announcements > * {
  position: relative;
  z-index: 1;
}

/* Messages - Chat Card */
.themed-messages-chat {
  background: var(--messages-chat-bg, var(--card-bg));
  color: var(--messages-chat-text, var(--card-text));
  border: var(--messages-chat-border-width, var(--card-border-width)) solid var(--messages-chat-border, var(--card-border));
  border-radius: var(--messages-chat-radius, var(--card-radius));
  box-shadow: var(--messages-chat-shadow, var(--card-shadow));
  padding: var(--messages-chat-padding, var(--card-padding));
  position: relative;
  overflow: hidden;
}

.themed-messages-chat::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--messages-chat-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--messages-chat-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-messages-chat > * {
  position: relative;
  z-index: 1;
}

/* ============================================
   SETTINGS PAGE ELEMENTS
   ============================================ */

/* Settings - Navigation Card */
.themed-settings-nav {
  background: var(--settings-nav-bg, var(--card-bg));
  color: var(--settings-nav-text, var(--card-text));
  border: var(--settings-nav-border-width, var(--card-border-width)) solid var(--settings-nav-border, var(--card-border));
  border-radius: var(--settings-nav-radius, var(--card-radius));
  box-shadow: var(--settings-nav-shadow, var(--card-shadow));
  padding: var(--settings-nav-padding, var(--card-padding));
  position: relative;
  overflow: hidden;
}

.themed-settings-nav::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--settings-nav-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--settings-nav-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-settings-nav > * {
  position: relative;
  z-index: 1;
}

/* Settings - Content Card */
.themed-settings-content {
  background: var(--settings-content-bg, var(--card-bg));
  color: var(--settings-content-text, var(--card-text));
  border: var(--settings-content-border-width, var(--card-border-width)) solid var(--settings-content-border, var(--card-border));
  border-radius: var(--settings-content-radius, var(--card-radius));
  box-shadow: var(--settings-content-shadow, var(--card-shadow));
  padding: var(--settings-content-padding, var(--card-padding));
  position: relative;
  overflow: hidden;
}

.themed-settings-content::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: var(--settings-content-bg-image);
  background-size: cover;
  background-position: center;
  opacity: var(--settings-content-bg-opacity, 1);
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

.themed-settings-content > * {
  position: relative;
  z-index: 1;
}

/* ============================================
   LCARS MODE STYLES
   Star Trek-inspired radical customization
   ============================================ */

/* LCARS mode active indicator */
.lcars-mode {
  --lcars-enabled: 1;
}

/* LCARS corner styles */
.lcars-corner-rounded {
  --lcars-corner-radius: 24px;
}

.lcars-corner-sharp {
  --lcars-corner-radius: 0px;
}

.lcars-corner-curve {
  --lcars-corner-radius: 40px;
}

/* LCARS sidebar elbow effect */
.lcars-sidebar {
  background-color: var(--lcars-background);
  border-top-right-radius: var(--lcars-corner-radius, 40px);
  border-bottom-right-radius: var(--lcars-corner-radius, 40px);
}

/* LCARS card style */
.lcars-card {
  background-color: rgba(204, 153, 0, 0.15);
  border: 2px solid var(--lcars-primary);
  border-radius: 0;
}

/* LCARS button with clip-path */
.lcars-button {
  background-color: var(--lcars-primary);
  border-radius: 15px;
  clip-path: polygon(10% 0, 100% 0, 100% 100%, 0 100%, 0 25%);
  padding: 10px 20px 10px 30px;
}

/* LCARS header bar */
.lcars-header {
  background: linear-gradient(90deg,
    var(--lcars-primary) 0%,
    var(--lcars-primary) 30%,
    transparent 30%,
    transparent 32%,
    var(--lcars-secondary) 32%,
    var(--lcars-secondary) 60%,
    transparent 60%,
    transparent 62%,
    var(--lcars-tertiary) 62%
  );
  height: 12px;
  border-radius: 6px;
}

/* LCARS panel border */
.lcars-panel {
  border-left: 4px solid var(--lcars-primary);
  padding-left: 16px;
}

/* LCARS text styling */
.lcars-text {
  font-family: 'Antonio', 'Orbitron', 'Helvetica Neue', sans-serif;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

/* ============================================
   THEME EDITOR ANIMATION KEYFRAMES
   Used by Advanced tab custom CSS presets
   ============================================ */

/* Matrix/Hacker Effects */
@keyframes crt-flicker {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.98; }
  25%, 75% { opacity: 0.96; }
}

@keyframes vhs-glitch {
  0%, 100% { transform: translate(0); }
  20% { transform: translate(-2px, 1px); }
  40% { transform: translate(2px, -1px); }
  60% { transform: translate(-1px, 2px); }
  80% { transform: translate(1px, -2px); }
}

/* Breathing/Pulse Effects */
@keyframes breathing {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.02); opacity: 0.95; }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 5px currentColor, 0 0 10px currentColor; }
  50% { box-shadow: 0 0 20px currentColor, 0 0 30px currentColor, 0 0 40px currentColor; }
}

/* Movement Effects */
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

@keyframes rotate-slow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Border Effects */
@keyframes border-flow {
  0% { border-color: #00ff00; }
  25% { border-color: #00ffff; }
  50% { border-color: #ff00ff; }
  75% { border-color: #ffff00; }
  100% { border-color: #00ff00; }
}

/* Glitch Effect */
@keyframes glitch {
  0%, 100% {
    transform: translate(0);
    text-shadow: none;
  }
  20% {
    transform: translate(-2px, 2px);
    text-shadow: 2px 0 #ff0000, -2px 0 #00ffff;
  }
  40% {
    transform: translate(2px, -2px);
    text-shadow: -2px 0 #ff0000, 2px 0 #00ffff;
  }
  60% {
    transform: translate(-1px, 1px);
    text-shadow: 1px 0 #ff0000, -1px 0 #00ffff;
  }
  80% {
    transform: translate(1px, -1px);
    text-shadow: -1px 0 #ff0000, 1px 0 #00ffff;
  }
}

/* Matrix Digital Rain (for background elements) */
@keyframes matrix-rain {
  0% { background-position: 0 0; }
  100% { background-position: 0 100%; }
}

/* Scanline animation */
@keyframes scanline {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100vh); }
}

/* Neon flicker */
@keyframes neon-flicker {
  0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
    text-shadow:
      0 0 4px #fff,
      0 0 11px #fff,
      0 0 19px #fff,
      0 0 40px currentColor,
      0 0 80px currentColor;
  }
  20%, 24%, 55% {
    text-shadow: none;
  }
}

/* ============================================
   MATRIX DIGITAL RAIN EFFECT
   Apply class "matrix-rain-bg" to enable falling characters
   ============================================ */
.matrix-rain-bg {
  position: relative;
  overflow: hidden;
}

.matrix-rain-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 1;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='100'%3E%3Ctext x='5' y='20' fill='%2300ff00' font-family='monospace' font-size='14' opacity='0.15'%3E%3C/text%3E%3Ctext x='25' y='50' fill='%2300ff00' font-family='monospace' font-size='12' opacity='0.2'%3E7%3C/text%3E%3Ctext x='10' y='80' fill='%2300ff00' font-family='monospace' font-size='16' opacity='0.1'%3E%3C/text%3E%3Ctext x='35' y='30' fill='%2300ff00' font-family='monospace' font-size='10' opacity='0.25'%3E0%3C/text%3E%3Ctext x='40' y='70' fill='%2300ff00' font-family='monospace' font-size='14' opacity='0.15'%3E%3C/text%3E%3Ctext x='15' y='95' fill='%2300ff00' font-family='monospace' font-size='11' opacity='0.18'%3E1%3C/text%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='120'%3E%3Ctext x='10' y='30' fill='%2300ff00' font-family='monospace' font-size='13' opacity='0.12'%3E%3C/text%3E%3Ctext x='40' y='60' fill='%2300ff00' font-family='monospace' font-size='15' opacity='0.18'%3E9%3C/text%3E%3Ctext x='5' y='90' fill='%2300ff00' font-family='monospace' font-size='11' opacity='0.22'%3E%3C/text%3E%3Ctext x='30' y='110' fill='%2300ff00' font-family='monospace' font-size='14' opacity='0.14'%3E3%3C/text%3E%3Ctext x='50' y='20' fill='%2300ff00' font-family='monospace' font-size='12' opacity='0.16'%3E%3C/text%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='80'%3E%3Ctext x='5' y='25' fill='%2300ff00' font-family='monospace' font-size='14' opacity='0.2'%3E5%3C/text%3E%3Ctext x='20' y='55' fill='%2300ff00' font-family='monospace' font-size='12' opacity='0.15'%3E%3C/text%3E%3Ctext x='30' y='75' fill='%2300ff00' font-family='monospace' font-size='10' opacity='0.18'%3E8%3C/text%3E%3C/svg%3E");
  background-repeat: repeat;
  animation: matrix-fall-1 8s linear infinite, matrix-fall-2 12s linear infinite, matrix-fall-3 6s linear infinite;
  opacity: 0.6;
}

@keyframes matrix-fall-1 {
  0% { background-position: 0 -100%; }
  100% { background-position: 0 100%; }
}

@keyframes matrix-fall-2 {
  0% { background-position: 50px -50%; }
  100% { background-position: 50px 150%; }
}

@keyframes matrix-fall-3 {
  0% { background-position: 100px -80%; }
  100% { background-position: 100px 120%; }
}

/* Ensure sidebar content stays above the rain effect */
.matrix-rain-bg > * {
  position: relative;
  z-index: 2;
}

/* ============================================
   MATRIX RAIN SPEED VARIANTS
   Use: matrix-rain-speed: slow | normal | fast
   ============================================ */

/* Slow speed - peaceful, zen-like falling */
.matrix-rain-slow::before {
  animation: matrix-fall-1 16s linear infinite, matrix-fall-2 24s linear infinite, matrix-fall-3 12s linear infinite !important;
}

/* Normal speed (default) - already defined above */
.matrix-rain-normal::before {
  animation: matrix-fall-1 8s linear infinite, matrix-fall-2 12s linear infinite, matrix-fall-3 6s linear infinite !important;
}

/* Fast speed - intense hacker mode */
.matrix-rain-fast::before {
  animation: matrix-fall-1 3s linear infinite, matrix-fall-2 4s linear infinite, matrix-fall-3 2s linear infinite !important;
}

/* Very fast speed - chaotic data stream */
.matrix-rain-veryfast::before {
  animation: matrix-fall-1 1.5s linear infinite, matrix-fall-2 2s linear infinite, matrix-fall-3 1s linear infinite !important;
}

/* ============================================
   CUSTOM ANIMATED BACKGROUND SYSTEM
   Users can create their own effects using these base classes
   ============================================ */

/* Base class for custom animated backgrounds */
.custom-animated-bg {
  position: relative;
  overflow: hidden;
}

.custom-animated-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 1;
}

/* Ensure content stays above custom backgrounds */
.custom-animated-bg > * {
  position: relative;
  z-index: 2;
}

/* Snowfall effect - winter theme */
.snowfall-bg {
  position: relative;
  overflow: hidden;
}

.snowfall-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 1;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='50'%3E%3Ccircle cx='25' cy='25' r='3' fill='white' opacity='0.6'/%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Ccircle cx='40' cy='40' r='2' fill='white' opacity='0.4'/%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30'%3E%3Ccircle cx='15' cy='15' r='1.5' fill='white' opacity='0.5'/%3E%3C/svg%3E");
  background-repeat: repeat;
  animation: snowfall-1 10s linear infinite, snowfall-2 15s linear infinite, snowfall-3 8s linear infinite;
  opacity: 0.8;
}

@keyframes snowfall-1 {
  0% { background-position: 0 -100%; }
  100% { background-position: 20px 100%; }
}

@keyframes snowfall-2 {
  0% { background-position: 0 -50%; }
  100% { background-position: -30px 150%; }
}

@keyframes snowfall-3 {
  0% { background-position: 0 -80%; }
  100% { background-position: 15px 120%; }
}

.snowfall-bg > * {
  position: relative;
  z-index: 2;
}

/* Sparkle/Stars effect - magical theme */
.sparkle-bg {
  position: relative;
  overflow: hidden;
}

.sparkle-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 1;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Cpolygon points='50,5 52,45 95,50 52,55 50,95 48,55 5,50 48,45' fill='%23ffd700' opacity='0.3'/%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Cpolygon points='40,2 41,36 78,40 41,44 40,78 39,44 2,40 39,36' fill='%23ffffff' opacity='0.2'/%3E%3C/svg%3E");
  background-repeat: repeat;
  animation: sparkle-twinkle 4s ease-in-out infinite alternate;
  opacity: 0.6;
}

@keyframes sparkle-twinkle {
  0% { opacity: 0.3; transform: scale(0.95); }
  50% { opacity: 0.7; transform: scale(1.05); }
  100% { opacity: 0.4; transform: scale(1); }
}

.sparkle-bg > * {
  position: relative;
  z-index: 2;
}

/* Bubbles effect - underwater/aquatic theme */
.bubbles-bg {
  position: relative;
  overflow: hidden;
}

.bubbles-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 1;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60'%3E%3Ccircle cx='30' cy='30' r='8' fill='none' stroke='%2300bfff' stroke-width='1' opacity='0.3'/%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Ccircle cx='20' cy='20' r='5' fill='none' stroke='%2387ceeb' stroke-width='1' opacity='0.25'/%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Ccircle cx='40' cy='40' r='12' fill='none' stroke='%2300ced1' stroke-width='1' opacity='0.2'/%3E%3C/svg%3E");
  background-repeat: repeat;
  animation: bubbles-rise 12s linear infinite;
  opacity: 0.7;
}

@keyframes bubbles-rise {
  0% { background-position: 0 100%; }
  100% { background-position: 30px -100%; }
}

.bubbles-bg > * {
  position: relative;
  z-index: 2;
}

/* Fire/Embers effect - warm/cozy theme */
.embers-bg {
  position: relative;
  overflow: hidden;
}

.embers-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 1;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='50'%3E%3Ccircle cx='25' cy='25' r='2' fill='%23ff6600' opacity='0.4'/%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='70' height='70'%3E%3Ccircle cx='35' cy='35' r='1.5' fill='%23ff9900' opacity='0.3'/%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30'%3E%3Ccircle cx='15' cy='15' r='1' fill='%23ffcc00' opacity='0.5'/%3E%3C/svg%3E");
  background-repeat: repeat;
  animation: embers-rise 8s ease-out infinite;
  opacity: 0.6;
}

@keyframes embers-rise {
  0% {
    background-position: 0 100%;
    opacity: 0.6;
  }
  50% {
    opacity: 0.8;
  }
  100% {
    background-position: -20px -100%;
    opacity: 0.3;
  }
}

.embers-bg > * {
  position: relative;
  z-index: 2;
}
